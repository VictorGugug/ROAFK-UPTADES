<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Actualizaciones Roblox AFK Clicker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <button class="sidebar-toggle">‚â°</button>

  <div class="sidebar" id="sidebar">
    <h3>Versiones anteriores</h3>
    <div id="version-list"></div>
  </div>

  <div class="main-container">
    <h1>Actualizaciones Roblox AFK Clicker</h1>
    <div id="actualizaciones">
      <p class="cargando">Cargando informaci√≥n de versiones...</p>
    </div>
  </div>

  <script>
    const toggleBtn = document.querySelector(".sidebar-toggle");
    const sidebar = document.getElementById("sidebar");

    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
    });

    fetch('versions.json')
      .then(res => res.json())
      .then(data => {
        if (!Array.isArray(data) || data.length === 0) {
          document.getElementById('actualizaciones').innerHTML = `
            <div class="sin-version">
              <span class="icon-alerta">‚ö†Ô∏è</span>
              <div class="sin-version-titulo">No hay versiones actualmente</div>
              <div class="sin-version-texto">Por favor, espera a una pr√≥xima actualizaci√≥n.<br>¬°Vuelve pronto!</div>
            </div>`;
        } else {
          const latest = data[0];
          const releaseDate = new Date(latest.date);
          const now = new Date();
          const diffMs = now - releaseDate;
          let timeAgo = '';

          const diffSec = Math.floor(diffMs / 1000);
          if (diffSec < 60) {
            timeAgo = `${diffSec} segundos atr√°s`;
          } else if (diffSec < 3600) {
            timeAgo = `${Math.floor(diffSec / 60)} minutos atr√°s`;
          } else if (diffSec < 86400) {
            timeAgo = `${Math.floor(diffSec / 3600)} horas atr√°s`;
          } else {
            timeAgo = `${Math.floor(diffSec / 86400)} d√≠as atr√°s`;
          }

          document.getElementById('actualizaciones').innerHTML = `
            <div class="versiones-horizontales">
              <div class="cuadro">
                <h2>Versi√≥n <span class="version-num">${latest.version}</span></h2>
                <p class="fecha"><span class="icon-fecha">üìÖ</span> <b>Fecha:</b> ${latest.date} (${timeAgo})</p>
                <p class="notas"><span class="icon-notas">üìù</span> ${latest.notes}</p>
                <a class="boton-descarga" href="${latest.url}" target="_blank">‚¨áÔ∏è Descargar</a>
              </div>
            </div>
          `;

          const versionList = document.getElementById('version-list');
          data.forEach(ver => {
            const a = document.createElement('a');
            a.href = `https://github.com/VictorGugug/ROAFK/releases/tag/v${ver.version}`;
            a.target = "_blank";
            a.textContent = `v${ver.version}`;
            versionList.appendChild(a);
          });
        }
      })
      .catch(() => {
        document.getElementById('actualizaciones').innerHTML = `
          <div class="sin-version">
            <span class="icon-alerta">‚ö†Ô∏è</span>
            <div class="sin-version-titulo">No hay versiones actualmente</div>
            <div class="sin-version-texto">Por favor, espera a una pr√≥xima actualizaci√≥n.<br>¬°Vuelve pronto!</div>
          </div>`;
      });
  </script>
</body>
</html>
