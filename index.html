<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Actualizaciones Roblox AFK Clicker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="main-container">
    <h1>Actualizaciones Roblox AFK Clicker</h1>
    <div id="actualizaciones">
      <p class="cargando">Cargando informaci√≥n de versiones...</p>
    </div>

    <!-- Bot√≥n para abrir/cerrar sidebar -->
    <button class="sidebar-toggle">‚â°</button>

    <!-- Sidebar de versiones -->
    <div class="sidebar" id="sidebar">
      <h3>Versiones anteriores</h3>
      <div id="version-list"></div>
    </div>
  </div>

  <script>
    function tiempoTranscurrido(fecha) {
      const ahora = new Date();
      const f = new Date(fecha);
      const diff = Math.floor((ahora - f) / 1000);
      if (diff < 60) return `${diff} segundos`;
      if (diff < 3600) return `${Math.floor(diff / 60)} minutos`;
      if (diff < 86400) return `${Math.floor(diff / 3600)} horas`;
      return `${Math.floor(diff / 86400)} d√≠as`;
    }

    fetch('versions.json')
      .then(res => res.json())
      .then(data => {
        if (!Array.isArray(data) || data.length === 0) {
          document.getElementById('actualizaciones').innerHTML = `
            <div class="sin-version">
              <span class="icon-alerta">‚ö†Ô∏è</span>
              <div class="sin-version-titulo">No hay versiones actualmente</div>
              <div class="sin-version-texto">Por favor, espera a una pr√≥xima actualizaci√≥n.<br>¬°Vuelve pronto!</div>
            </div>
          `;
        } else {
          const main = data[0];
          document.getElementById('actualizaciones').innerHTML = `
            <div class="cuadro">
              <h2>Versi√≥n <span class="version-num">${main.version}</span></h2>
              <p class="fecha"><span class="icon-fecha">üìÖ</span> ${main.date} (${tiempoTranscurrido(main.date)} atr√°s)</p>
              <p class="notas"><span class="icon-notas">üìù</span> ${main.notes}</p>
              <a class="boton-descarga" href="${main.url}" target="_blank">‚¨áÔ∏è Descargar</a>
            </div>
          `;

          const versions = data.slice(1).map(v => `
            <a href="${v.url}" target="_blank">${v.version} ‚Äî ${tiempoTranscurrido(v.date)} atr√°s</a>
          `).join('');

          document.getElementById('version-list').innerHTML = versions;
        }
      })
      .catch(() => {
        document.getElementById('actualizaciones').innerHTML = `
          <div class="sin-version">
            <span class="icon-alerta">‚ö†Ô∏è</span>
            <div class="sin-version-titulo">No hay versiones actualmente</div>
            <div class="sin-version-texto">Por favor, espera a una pr√≥xima actualizaci√≥n.<br>¬°Vuelve pronto!</div>
          </div>
        `;
      });

    const sidebar = document.getElementById('sidebar');
    const toggle = document.querySelector('.sidebar-toggle');
    toggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });
  </script>

</body>
</html>
