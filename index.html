<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Actualizaciones Roblox AFK Clicker</title>
  <style>
    body {
      background-color: #fff;
      color: #24292e;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.5;
      margin: 20px;
    }

    .main-container {
      max-width: 720px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
    }

    h1 {
      font-size: 2em;
      font-weight: 600;
      margin-bottom: 20px;
      border-bottom: 1px solid #eaecef;
      padding-bottom: 0.3em;
    }

    select#version-select {
      padding: 8px 12px;
      font-size: 1em;
      border-radius: 6px;
      border: 1px solid #d0d7de;
      background-color: white;
      color: #24292e;
      cursor: pointer;
      margin-bottom: 20px;
    }

    /* Contenedor notas con fondo gris y padding */
    .notas-markdown-container {
      background-color: #f6f8fa; /* gris claro */
      border-radius: 8px;
      padding: 15px 20px;
      margin-top: 20px;
      position: relative;
      color: #24292e;
    }

    .notas-markdown {
      white-space: pre-wrap;
      line-height: 1.5em;
      max-width: 100%;
      transition: font-size 0.3s ease;
    }

    .notas-markdown.pequeno {
      font-size: 0.8em;
      color: #444;
    }

    /* Texto truncado con max-height y overflow oculto */
    .notas-markdown.truncado {
      max-height: 80px;
      overflow: hidden;
    }

    /* Botón ver más/menos */
    .ver-mas-btn {
      margin-top: 0.5em;
      background-color: transparent;
      border: none;
      color: #0969da;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9em;
      user-select: none;
      transition: color 0.2s;
      padding: 0;
    }
    .ver-mas-btn:hover {
      color: #054ab8;
    }
  </style>
</head>
<body>
  <div class="main-container">
    <h1>Actualizaciones Roblox AFK Clicker</h1>

    <select id="version-select">
      <option value="" disabled selected hidden>Seleccionar versión</option>
    </select>

    <div id="actualizaciones">
      <p>Cargando información de versiones...</p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    // Datos de ejemplo (deberías reemplazarlo con fetch o tu fuente real)
    const versionsData = {
      "v1.0.0": {
        date: "2023-03-04T23:02:00.000Z",
        notes: `
### Mejoras
- Se agregaron puntos.
- Se mejoró la interfaz.

### Correcciones
- Arreglado bug en el clic automático.
- Optimización del rendimiento.
        `
      },
      "v1.1.0": {
        date: "2023-03-10T15:30:00.000Z",
        notes: `
### Nuevas características
- Nuevo modo nocturno.
- Añadido sistema de recompensas diarias.
- Mejoras en la estabilidad.
- Varias correcciones menores.
- ¡Disfruta del juego!
        `
      }
    };

    const versionSelect = document.getElementById('version-select');
    const actualizaciones = document.getElementById('actualizaciones');

    // Agregar opciones al select
    Object.keys(versionsData).forEach(ver => {
      const opt = document.createElement('option');
      opt.value = ver;
      opt.textContent = ver;
      versionSelect.appendChild(opt);
    });

    function formatDate(dateStr) {
      return new Date(dateStr).toISOString().slice(0, 10);
    }

    // Crear contenedor de notas con truncado y botón
    function createExpandableMarkdown(markdownText) {
      const html = marked.parse(markdownText);

      const container = document.createElement('div');
      container.className = 'notas-markdown-container';

      const notasDiv = document.createElement('div');
      notasDiv.className = 'notas-markdown truncado';
      notasDiv.innerHTML = html;

      container.appendChild(notasDiv);

      // Ver si el contenido excede la altura para mostrar botón
      // Necesitamos esperar a que el DOM calcule alturas:
      setTimeout(() => {
        if (notasDiv.scrollHeight > notasDiv.clientHeight) {
          const btn = document.createElement('button');
          btn.className = 'ver-mas-btn';
          btn.textContent = 'Ver más';

          btn.addEventListener('click', () => {
            if (notasDiv.classList.contains('truncado')) {
              // Expandir: quitar truncado y poner texto pequeño
              notasDiv.classList.remove('truncado');
              notasDiv.classList.add('pequeno');
              btn.textContent = 'Ver menos';
            } else {
              // Colapsar: volver a truncado y tamaño normal
              notasDiv.classList.add('truncado');
              notasDiv.classList.remove('pequeno');
              btn.textContent = 'Ver más';
            }
          });

          container.appendChild(btn);
        }
      }, 100);

      return container;
    }

    // Mostrar actualización seleccionada
    function mostrarVersion(ver) {
      actualizaciones.innerHTML = '';

      const data = versionsData[ver];
      if (!data) {
        actualizaciones.textContent = 'Versión no encontrada.';
        return;
      }

      // Fecha
      const fechaP = document.createElement('p');
      fechaP.textContent = `Fecha: ${formatDate(data.date)}`;
      actualizaciones.appendChild(fechaP);

      // Notas markdown con truncado/expansión
      const notasContainer = createExpandableMarkdown(data.notes);
      actualizaciones.appendChild(notasContainer);
    }

    // Evento cambio versión
    versionSelect.addEventListener('change', e => {
      mostrarVersion(e.target.value);
    });

    // Opcional: mostrar primera versión automáticamente
    // versionSelect.selectedIndex = 1;
    // mostrarVersion(versionSelect.value);
  </script>
</body>
</html>
